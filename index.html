<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->

    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0,minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
<script src="inflate.min.js"></script>
	
	
	
    
    <style>
       .uimusic {
        position: absolute;
        z-index: 100;
        top: 80%;
        right: 4%;
        width: 90%;
        height: 18%;
       
        box-sizing: border-box;
          
    }
    </style>
</head>
    

    


<body style="margin : 0px; overflow: hidden;">
    <a-scene embedded="true" arjs='debugUIEnabled:false; trackingMethod: best;'
        device-orientation-permission-ui="enabled: false" vr-mode-ui="enabled: false" loading-screen="enabled:false"
        precision: mediump>
        
         <video id="vid" src="cutA.mp4" playsinline webkit-playsinline muted>
        </video>
        
        <a-marker type='pattern' url='patter.patt' markerhandler>
            
		
        </a-marker>
	    
	    <a-entity id="idfbx" position="-0.2 0 -5.5" scale=".5 .5 .5" fbx-model="src: position_model_normal.fbx;"  visible="false" shadow="receive: true; cast: true" animation-mixer="clip:*"></a-entity>
        	    
	    <a-image clickhandler src="#my-image2" id="aimage2" position="0 -0.3 -1" visible="false" height="0.15" width="0.4">   </a-image>
        
        <a-entity camera position="0 0 0"></a-entity>
       
         <a-assets>
            <img id="my-image2"src="2.png">
        </a-assets>
        
         <a-entity id="animationPlayer" position="-0.2 -2 -5.5" scale=".2 .2 .2" fbx-model="src: position_model_normal.fbx" animation-mixer="clip: *;loop: repeat; repetitions: 2;"></a-entity>
           
            
	    <a-box id="play_again" position="0 0 -3" height=0.5 depth=0.09 visible="true" color="blue"></a-box>
            <a-text value="Play again" position="0 1 -3"></a-text>
        
         
            
             <a-video id="aVideoHide" src="#vid" position="0 0 0" visible="false" rotation="-90 0 0" height="3px" width="3px"
                material="shader: chromakey; color: 0.1 0.9 0.2"></a-video>
        
        
    </a-scene>
    <div class="uimusic" id="containermusic">
        </div>

    <script>
        // test button
        
        let button = document.querySelector("#play_again");
let player = document.querySelector("#animationPlayer");
button.addEventListener('click',function(){
  //hide the button
  button.setAttribute('visible','false');

  //add the event listener to handle post animation before starting animations 
  (use once to help with cleanup)
  player.addEventListener('animation-finished',function() {
    button.setAttribute('visible','true');
    player.removeAttribute('animation-mixer');
  },{once:true});

  //start the animation by appending the animation-mixer
  player.addAttribute('animation-mixer',{clip: "*",loop: "repeat", repetitions: 2});
});
        
        //het khu vuc test button
      
        
          var scene = document.querySelector('#containermusic');
	  
        scene.addEventListener("click", function (e) {
          let myEl = document.querySelector("#aimage2");
            myEl.setAttribute("visible", "false");
		scene.style.display = 'none';
		
            
            alert("chien");
             
        });
    
        
        
           AFRAME.registerComponent('markerhandler', {
            tick: function () {
		   let fbxid = document.querySelector("#idfbx");
                 let imageTrue = document.getElementsByTagName("a-image")[0];
                if (document.querySelector("a-marker").object3D.visible == true) {
                    imageTrue.setAttribute('visible', true);
			fbxid.setAttribute('visible', true);
		
                    
                } else if (document.querySelector("a-marker").object3D.visible == false) {
                  
                }
            }
        });
        

    </script>
</body>

</html>
 
